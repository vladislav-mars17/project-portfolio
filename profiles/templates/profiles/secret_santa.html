<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8">
        <meta name="author" content="Uksekov Vladislav">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title></title>
        {% load static %}
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="{% static 'profiles/secret_santa_style.css' %}" />
    </head>
    <body style="height: 100%;">
        <div id="wrapper" class="wrapper" style="position: relative; min-height: 100%;">
            <section>
                <ul class="lightrope">
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                  </ul>
                <div class="content">
                    <div class="container" style="padding-bottom: 90px; padding-left: 0%; padding-right: 0%;">
                        <div class="container my-5" style="padding-left: 0%; padding-right: 0%;">
                            <div class="p-2 text-center bg-body-tertiary rounded-3">
                                
                                <h1 class="text-body-emphasis" style="margin-top: 5%;">Тайный Санта</h1>

                                <div class="col-lg-8 mx-auto fs-5 text-muted">
                                    <p><br>Организуйте тайный обмен подарками!</p>
                                    <p>1. Добавьте всех участников игры, указав их почту</p>
                                    <p>2. Можете добавить ограничение на стоимость подарков</p>
                                    <p>3. Сохраните введенные данные</p>
                                    <p>4. Разошлите уведомления сейчас или сделайте это позже</p>
                                </div>

                                <h1 class="text-body-emphasis" id="text_result" name="text_result" style="color: red;">{{ text_result }}</h1>                                
                
                                <form method="POST" id="players_form">
                                    {% csrf_token %}
                                    <input hidden type="text" id="number_players" name="number_players" value="1">
                                                    
                                    <div class="row g-3" style="margin-top: 3%;">
                                        <div class="col-md-4" style="margin: 1% auto;"></div>
                                        <div class="col-md-4" style="margin: 1% auto;">
                                            <div class="form-floating mb-3">
                                                <input type="text" class="form-control" id="floatingLimit" name="limit" placeholder="Ограничение на стоимость подарков" style="background-color: rgba(234, 253, 255, 0.452); box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);">
                                                <label for="floatingLimit" class="text-muted" style="margin-bottom: 1%;">Ограничение на стоимость подарков</label>
                                            </div>
                                        </div>
                                        <div class="col-md-4" style="margin: 1% auto;"></div>
                                    </div>
                                    
                                    <div id="player_list">
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <div class="form-floating">
                                                    <input type="text" class="form-control" id="floatingInput" placeholder="Имя" name="name_1" style="background-color: rgba(255, 234, 234, 0.452); box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);">
                                                    <label for="floatingInput" class="text-muted">Ваше имя</label>
                                                </div>
                                            </div>
                
                                            <div class="col-md-6">
                                                <div class="form-floating">
                                                    <input type="email" class="form-control" id="floatingEmail" placeholder="Email" name="email_1" style="background-color: rgba(255, 234, 234, 0.452); box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);">
                                                    <label for="floatingEmail" class="text-muted">Ваш email</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                
                                </form>

                                <div style="margin-top: 7%;">
                                    <button class="btn btn-primary btn-lg px-4 rounded-pill btn-success" type="button" onclick="added()" style="box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);">Добавить игрока</button>
                                </div>
                                <div style="margin-top: 3%;">
                                    <button class="btn btn-primary btn-lg px-4 rounded-pill btn-danger" type="submit" form="players_form" style="box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);">Сохранить</button>
                                </div>

                            </div>
                        </div> 
                    </div>
                </div>
            </section>
            <footer style="position: absolute; bottom: 0; left: 0; width: 100%; height: 80px;">
                <p class="text-center text-muted">by Uksekov Vladislav</p>
            </footer>
        </div>

        <script>
            var number_players = document.getElementById("number_players").value
        
            function added() {
                number_players = Number(number_players) + 1;

                let row_div = document.createElement("div");
                row_div.setAttribute("class", "row g-3");
                row_div.setAttribute("style", "margin-top: 1%;");                      
        
                let col_div1 = document.createElement("div");
                col_div1.setAttribute("class", "col-md-6");
        
                let col_div2 = document.createElement("div");
                col_div2.setAttribute("class", "col-md-6");

                let form_div1 = document.createElement("div");
                form_div1.setAttribute("class", "form-floating");

                let form_div2 = document.createElement("div");
                form_div2.setAttribute("class", "form-floating");
        
                let name_input = document.createElement("input");
                name_input.setAttribute("type", "text");
                name_input.setAttribute("class", "form-control");
                name_input.setAttribute("id", "floatingInput");
                name_input.setAttribute("name", "name_" + number_players);
                name_input.setAttribute("placeholder", "Имя");

                let name_label = document.createElement("label");
                name_label.setAttribute("for", "floatingInput");
                name_label.setAttribute("class", "text-muted");
                name_label.innerHTML = "Имя"

                let email_input = document.createElement("input");
                email_input.setAttribute("type", "email");
                email_input.setAttribute("class", "form-control");
                email_input.setAttribute("id", "floatingEmail");
                email_input.setAttribute("name", "email_" + number_players);
                email_input.setAttribute("placeholder", "Email");

                let email_label = document.createElement("label");
                email_label.setAttribute("for", "floatingEmail");
                email_label.setAttribute("class", "text-muted");
                email_label.innerHTML = "Email"

                if (number_players % 2 == 0) {
                    name_input.setAttribute("style", "background-color: rgba(237, 255, 234, 0.452); box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);");
                    email_input.setAttribute("style", "background-color: rgba(237, 255, 234, 0.452); box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);");
                } else {
                    name_input.setAttribute("style", "background-color: rgba(255, 234, 234, 0.452); box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);");
                    email_input.setAttribute("style", "background-color: rgba(255, 234, 234, 0.452); box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);");
                }

                form_div1.appendChild(name_input);
                form_div1.appendChild(name_label);

                form_div2.appendChild(email_input);
                form_div2.appendChild(email_label);
        
                col_div1.appendChild(form_div1);
                col_div2.appendChild(form_div2);

                row_div.appendChild(col_div1);
                row_div.appendChild(col_div2);
        
                document.getElementById("player_list").appendChild(row_div);
                document.getElementById("number_players").setAttribute("value", number_players);
                document.getElementById("number_players").innerHTML = number_players
            }
        </script>
    </body>
</html>